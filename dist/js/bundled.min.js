"use strict";function getHash(){return location.hash.substr(1).split("-")[1]}function getUsers(){var e=new XMLHttpRequest;return e.open("GET","data/users.json",!1),e.send(null),JSON.parse(e.responseText)}var _createClass=function(){function a(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,s){return t&&a(e.prototype,t),s&&a(e,s),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Chat=function(){function e(){_classCallCheck(this,e),this.chatRooms={},this.chatroomCurrent="current_chatroom",this.chatroomData="chatroom_data"}return _createClass(e,[{key:"createNewChatRoom",value:function(e,t,s){this.isChatRoomCreated(t)?this.chatRooms=this.getChatRoomData():(sessionStorage.setItem(this.chatroomCurrent,t),this._loadChatRoom(t),this.sendMessage(t,e,s,"Welcome to the chat! :-)"))}},{key:"getChatRoomData",value:function(){var e=sessionStorage.getItem(this.chatroomData);return e?JSON.parse(e):{}}},{key:"getCurrentChatRoom",value:function(){var e=sessionStorage.getItem(this.chatroomCurrent);return e||"randomId"}},{key:"hasChatRooms",value:function(){if(sessionStorage.getItem(this.chatroomCurrent))return!0}},{key:"isChatRoomCreated",value:function(e){return!(!this.hasChatRooms()||sessionStorage.getItem(this.chatroomCurrent)!=e)}},{key:"sendMessage",value:function(e,t,s,a){a&&(this.chatRooms[e].log.push({from_user:t,avatar:s,message:a}),this._setChatRoomData(this.chatRooms))}},{key:"getMessagesLog",value:function(e){return this.chatRooms[e].log}},{key:"_loadChatRoom",value:function(e){e&&(this.chatRooms[e]={log:[]})}},{key:"_setChatRoomData",value:function(e){sessionStorage.setItem(this.chatroomData,JSON.stringify(e))}}]),e}();_createClass=function(){function a(e,t){for(var s=0;s<t.length;s++){var a=t[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(e,t,s){return t&&a(e.prototype,t),s&&a(e,s),e}}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Friends=function(){function e(){_classCallCheck(this,e),this.favoriteUsers={},this.friendsData="friends",this.getStoredFriends()&&(this.favoriteUsers=this.getStoredFriends())}return _createClass(e,[{key:"getStoredFriends",value:function(){var e=sessionStorage.getItem(this.friendsData);if(e)return JSON.parse(e)}},{key:"getListOfFriends",value:function(){return this.favoriteUsers}},{key:"getTotalFriends",value:function(){return Object.keys(this.favoriteUsers).length}},{key:"isFriend",value:function(e){if(this.favoriteUsers[e])return!0}},{key:"addFriend",value:function(e){return this.favoriteUsers[e]=!0,this._setFriend(),!0}},{key:"removeFriend",value:function(e){return delete this.favoriteUsers[e],this._setFriend(),!0}},{key:"_setFriend",value:function(){sessionStorage.setItem(this.friendsData,JSON.stringify(this.favoriteUsers))}},{key:"_hasFriendsInSession",value:function(){return!!sessionStorage.friends}}]),e}();function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Profile=function e(t){_classCallCheck(this,e),this.profileData=t};